# 单一锁  
SETNX key value   
将 key 的值设为 value ，当且仅当 key 不存在。  
若给定的 key 已经存在，则 SETNX 不做任何动作。  
SETNX 是『SET if Not exists』(如果不存在，则 SET)的简写。  
返回值：  
设置成功，返回 1 。  
设置失败，返回 0 。  

使用 SETNX 完成同步锁的流程及事项如下： 获取（SETNX）- 超时（SETEX）- 删除（DEL）  
  
使用 SETNX 命令获取锁，若返回0（key已存在，锁已存在）则获取失败，反之获取成功  
为了防止获取锁后程序出现异常，导致其他线程/进程调用 SETNX 命令总是返回0而进入死锁状态，需要为该key设置一个“合理”的过期时间  
释放锁，使用DEL命令将锁数据删除  

# 信号量  
使用有序集合  key value 分别是 尝试获取信号量的进程UUID 进程尝试获取信号量时的Unix时间戳  

进程在尝试获取信号量时会生成一个UUID，并使用当前时间戳作为分值，将标识符添加到有序集合里面。接着进程会检查自己的标识符在有序集合中的排名 。  
如果排名低于可获取的信号量总数（成员的排名从0开始计算），那么表示进程成功地取得了信号量。  
反之，则表示进程未能取得信号量，它必须从有序集合里面移除自己的标识符。  

处理过期的信号量  
    程序在将标识符添加到有序集合之前，会先清理有序集合中所有时间戳大于超时数值（timeout number value）的标识符。  
