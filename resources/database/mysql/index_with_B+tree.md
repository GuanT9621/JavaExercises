起源于某次看到新建的空表竟然占用了16KB的空间，所以断断续续写下以下内容。
参考https://www.cnblogs.com/leefreeman/p/8315844.html

# 1 为什么InnoDB空表是16KB

## 1.1 最小存储单元
    磁盘存储数据最小单元是扇区，一个扇区的大小是512字节  
    文件系统（如XFS/EXT4）的最小单元是块，一个块的大小是4k  
    InnoDB存储引擎的最小单元是页（Page），一个页的大小是16K（可以通过参数设置，SHOW VARIABLES 查询系统变量）

在linux下验证如下   
du -ah  
0       ./zero  
4.0K    ./oneb  

ll  
-rw-r--r--   1 root root    2 9月   6 11:48 oneb  
-rw-r--r--   1 root root    0 9月   6 11:48 zero  
    
问题来了，为什么InnoDB空表依然占用16KB？

## 1.2 空表不'空' - 填充因子
一页中不可能所有空间都用于存放数据，它还会存放一些少量的其他字段比如page level，index number等等

页的填充因子也导致一个页不可能全部用于保存数据。 

# 2 如何查找数据

## 2.1 全表查找
表中的数据都是存储在页中的，假设一行数据的大小是1k，那么一个页可以存放16行这样的数据。  

如果数据库只按这样的方式存储，查找数据时因为不知道要查找的数据存在哪个页中，只好把所有的页遍历一遍。  

但是，这样做很慢。
## 2.2 用B+树组织数据
1 先将数据记录按主键进行排序，分别存放在不同的页中

2 除了存放数据的页以外，还有存放键值 + 指向数据指针的索引页。

3 索引页也是排好序的。这样的数据组织形式，我们称为索引组织表。

每张表的根页位置在表空间文件中是固定的，即上面提到的索引页。

## 查找
· InnoDB存储引擎的最小存储单元是页，页可以用于存放数据也可以用于存放键值+指针，在B+树中叶子节点存放数据，非叶子节点存放键值+指针。

· 索引组织表通过非叶子节点的二分查找法以及指针确定数据在哪个页中，进而在去数据页中查找到需要的数据；

# 可以存放多少数据？
B+树的存放总记录数为：根节点指针数*单个叶子节点记录行数。

InnoDB的一棵B+树可以存放多少行数据  
约2千万


