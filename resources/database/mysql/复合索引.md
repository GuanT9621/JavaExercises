## 复合索引 最左匹配原则  
如果有一个2列的索引(col1,col2), 则已经对(col1)、(col1,col2)上建立了索引；  
如果有一个3列索引(col1,col2,col3)，则已经对(col1)、(col1,col2)、(col1,col2,col3)上建立了索引；  

## 组合索引(a,b)

explain select * from test where a=1 and b=1;
explain select * from test where b=1 and a=1;

在查询解释中显示都用到了索引，是因为：  
mysql在处理where条件是，优化查询条件一批匹配索引的位置，直到遇到范围查询(>、<、between、like)就停止匹配，
也就是说mysql会自动优化查询条件来匹配索引，来满足使用索引的条件。  

上述例子中创建（a,b）索引，也就相当于创建了索引a 和索引 ab（只能从左到右顺序组合创建）。
这样在where条件中 将使用最频繁的字段写在前面，也能匹配上。  

但。还有些例子如果where条件中只有 where b=1会不会用到复合索引？  
答案是会用到。  

原理：  
根据mysql的原理，只要是满足索引或者索引的一部分就可以使用index方式扫描（explain下的type类型），mysql都可能会用到这个复合索引，
但有一个致命的缺点！效率不高。mysql会从索引中的第一个数据一个个的查找到最后一个数据，直到找到符合判断条件的某个索引。  

注意：  
复合索引什么情况下才能真正被调用？最左侧的索引字段先进行了等值匹配，之后的字段变得有序时，才会用到这个复合索引。
简单说。就是复合索引的字段最好有有序的才会确保用到它。

总结
复合索引的最左原则就是建立索引KEY union_index (a,b,c)时，等于建立了(a)、(a,b)、(a,b,c)三个索引，从形式上看就是索引向左侧聚集，
所以叫做最左原则，因此最常用的条件应该放到联合索引的组左侧。  

利用联合索引加速查询时，联合查询条件符合“交换律”，也就是where a = 1 and b = 1 等价于 where b = 1 and a = 1，
这两种写法都能利用索引KEY union_index (a,b,c)。